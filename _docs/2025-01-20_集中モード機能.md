# 集中モード機能 - 実装ログ

## 実装日
2025-01-20

## 概要
マルチディスプレイ環境で集中作業をサポートするWebアプリケーションを実装。メイン画面でコントローラーを操作し、他のディスプレイに黒画面とポモドーロタイマーを表示する機能を提供。

## 実装内容

### 1. メインコントローラー (index.html, main.js)
- 集中モード/通常モードの切り替え機能
- ポモドーロタイマーの設定（作業時間・休憩時間）
- 追加ウィンドウの管理機能
- ディスプレイ情報の表示

### 2. ポモドーロタイマー (timer.html)
- 25分作業/5分休憩のポモドーロタイマー
- 大画面表示対応（レスポンシブデザイン）
- 作業/休憩時の背景色自動切り替え
- 音声通知機能（Web Audio API使用）
- フルスクリーン対応（ダブルクリックで切り替え）

### 3. ブラックスクリーン (black.html)
- 完全な黒画面表示
- マウスカーソル自動非表示（2秒後）
- フルスクリーン対応

### 4. スタイリング (styles.css)
- モダンなグラデーションデザイン
- レスポンシブ対応
- アニメーション効果

## 使用方法

1. `index.html` をブラウザで開く
2. ポモドーロタイマーの時間を設定（デフォルト: 作業25分、休憩5分）
3. 「集中モード開始」ボタンをクリック
4. 自動的に2つの新しいウィンドウが開く：
   - タイマーウィンドウ（ポモドーロタイマー）
   - ブラックスクリーンウィンドウ
5. 各ウィンドウをそれぞれのディスプレイに配置
6. ダブルクリックでフルスクリーン表示に切り替え

## 技術的な詳細

### ウィンドウ間通信
- `postMessage` APIを使用してメインコントローラーから各ウィンドウへ設定を送信
- タイマー設定の動的更新が可能

### フルスクリーン制御
- Fullscreen APIを使用
- ユーザー操作（ダブルクリック）でフルスクリーン切り替え
- セキュリティ制約により自動フルスクリーンは制限あり

### 音声通知
- Web Audio APIを使用してシンプルなビープ音を生成
- 作業/休憩の切り替え時に通知

## 注意事項

1. **ブラウザのポップアップブロック**
   - 初回使用時はポップアップを許可する必要がある
   - ブラウザ設定でこのサイトのポップアップを許可推奨

2. **フルスクリーン権限**
   - ユーザーの操作が必要（自動化不可）
   - 各ウィンドウでダブルクリックして手動でフルスクリーンに

3. **ウィンドウ配置**
   - 現在は手動で各ディスプレイに配置が必要
   - ブラウザのセキュリティ制約により自動配置は制限あり

## 今後の改善案

1. **Electron化**
   - デスクトップアプリとして実装することで、より高度なディスプレイ制御が可能
   - 自動的な複数ディスプレイへの配置
   - システムレベルのフルスクリーン制御

2. **データ永続化**
   - 作業履歴の保存
   - 統計情報の表示
   - LocalStorageまたはIndexedDBの活用

3. **カスタマイズ機能**
   - テーマカラーの変更
   - 複数のタイマープリセット
   - カスタム通知音

4. **キーボードショートカット**
   - グローバルホットキーの実装（Electron化時）
   - タイマー制御のショートカット

## ファイル構成

```
集中モード/
├── index.html          # メインコントローラー
├── timer.html          # ポモドーロタイマー
├── black.html          # ブラックスクリーン
├── main.js            # コントローラーロジック
├── styles.css         # 共通スタイル
└── _docs/
    └── 2025-01-20_集中モード機能.md  # 本ドキュメント
```